{"version":3,"sources":["webpack:///src/views/MZone/blogMetaDialog.vue","webpack:///./src/views/MZone/blogMetaDialog.vue?82aa","webpack:///./src/views/MZone/blogMetaDialog.vue","webpack:///src/views/MZone/editorBlog.vue","webpack:///./src/views/MZone/editorBlog.vue?938b","webpack:///./src/views/MZone/editorBlog.vue"],"names":["blogMetaDialog","data","qiniuToken","categoryList","currentCate","tagList","selectedTags","blogDesc","blogCover","methods","getBlogCategory","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","next","$http","sent","status","$emit","getBlogTag","stop","_this2","_callee2","_ref2","_context2","_id","setCurrentCate","cate","selectTag","tagItem","index","findIndex","item","splice","push","setCover","cover","getCover","res","console","log","src_const","key","setShow","flag","publish","watch","desc","components","partTitle","uploadImg","customUploadImg","mounted","_this3","getQiniuToken","then","MZone_blogMetaDialog","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","attrs","text","placeholder","type","model","value","callback","$$v","expression","directives","name","rawName","title","src","alt","useType","getStatus","token","scopedSlots","_u","fn","slotProps","icon","trigger","_l","class","_s","includes","effect","size","closable","close","staticRenderFns","editorBlog","showDialog","blogParams","category","tags","content","computed","userInfo","$store","state","user","setBlogParams","hasOwnProperty","params","assign_default","authorId","publishBlog","$confirm","confirmButtonText","cancelButtonText","$router","go","catch","metaChange","setShowDialog","$message","message","metaDialog","__webpack_require__","normalizeComponent","ssrContext","MZone_editorBlog","$set","change","editorBlog_Component","editorBlog_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.433b79218a623c50b4d8.js","sourcesContent":["<template>\n  <div class=\"blog-meta-dialog-cmp all0\">\n    <div class=\"dialog-content hor-ver-center\">\n      <i class=\"el-icon-close p-r-t\" @click=\"setShow(false)\"></i>\n      <div class=\"meta-list\">\n        <div class=\"meta-item\">\n          <part-title text=\"文章描述\" />\n          <el-input placeholder=\"请输入文章描述\" type=\"textarea\" v-model=\"blogDesc\" />\n        </div>\n        <div class=\"meta-item cover\">\n          <part-title text=\"文章封面\" />\n          <div class=\"img-content\" v-show=\"blogCover\">\n            <i class=\"el-icon-close\" title=\"删除封面\" @click=\"setCover('')\"></i>\n            <img class=\"img\" :src=\"blogCover\" alt=\"\">          \n          </div>\n          <div class=\"upload-cover\" v-show=\"!blogCover\">\n            <uploadImg useType=\"slot\" :getStatus=\"getCover\" :token=\"qiniuToken\">\n              <template slot-scope=\"slotProps\">\n                <el-button type=\"primary\" icon=\"el-icon-upload\" @click=\"slotProps.trigger\">上传博客封面</el-button>\n              </template>\n            </uploadImg>\n          </div>\n        </div>\n        <div class=\"meta-item cate-tag\">\n          <part-title text=\"文章分类及标签\" />\n          <div class=\"category item\">\n            <span\n              :class=\"currentCate._id === item._id ? 'cate-item isactive' : 'cate-item'\"\n              v-for=\"item in categoryList\"\n              :key=\"item._id\"\n              @click=\"setCurrentCate(item)\"\n            >\n              {{ item.name }}\n            </span>\n          </div>\n          <div class=\"tag item\">\n            <span\n              :class=\"selectedTags.includes(item.name) ? 'tag-item isselected' : 'tag-item'\"\n              v-for=\"item in tagList\"\n              :key=\"item._id\"\n              @click=\"selectTag(item)\"\n            >\n              <el-tag\n                type=\"success\"\n                :effect=\"selectedTags.includes(item.name) ? 'dark' : 'plain'\"\n              >{{item.name}}</el-tag>\n            </span>\n          </div>\n          <div class=\"tag item\">\n            已选标签：\n            <span\n              class=\"tag-item\"\n              v-for=\"item in selectedTags\"\n              :key=\"item\"\n            >\n              <el-tag size=\"small\" closable @close=\"selectTag(item)\">{{item.name}}</el-tag>\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class=\"footer\">\n        <el-button type=\"text\" @click=\"setShow(false)\">取消</el-button>\n        <el-button type=\"info\">存为草稿</el-button>\n        <el-button type=\"primary\" @click=\"publish\">发表博客</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport partTitle from '@/components/partTitle'\nimport uploadImg from '@/components/customUploadImg'\nimport { qiniu_URL } from '@/const'\nexport default {\n  data() {\n    return {\n      qiniuToken: '',\n      categoryList: [],\n      currentCate: {},\n      tagList: [],\n      selectedTags: [],\n      blogDesc: '',\n      blogCover: ''\n    }\n  },\n  methods: {\n    async getBlogCategory() {\n      const { data } = await this.$http.getBlogCategory()\n      if (data.status === 2000) {\n        this.categoryList = data.data\n        this.currentCate = this.categoryList[0]\n        this.$emit('change', 'category', this.currentCate)\n        this.getBlogTag()\n      }\n    },\n    async getBlogTag() {\n      const { data } = await this.$http.getBlogTag(this.currentCate._id)\n      if (data.status === 2000) {\n        this.tagList = data.data\n      }\n    },\n    setCurrentCate(cate) {\n      this.currentCate = cate\n      this.$emit('change', 'category', this.currentCate)\n      this.getBlogTag()\n    },\n    selectTag(tagItem) {\n      // const name = item\n      const selectedTags = this.selectedTags || []\n      const index = selectedTags.findIndex(item => item._id === tagItem._id)\n      if (index !== -1) {\n        selectedTags.splice(index, 1)\n      } else {\n        selectedTags.push(tagItem)\n      }\n      this.$emit('change', 'tags', this.selectedTags)\n    },\n    setCover(cover) {\n      this.blogCover = cover\n      this.$emit('change', 'cover', this.blogCover)\n    },\n    getCover(res) {\n      console.log(res)\n      if (res.status === 'complete') {\n        const cover = qiniu_URL + res.data.key\n        this.setCover(cover)\n      }\n    },\n    setShow(flag) {\n      this.$emit('setShow', flag)\n    },\n    publish() {\n      this.$emit('publish')\n    }\n  },\n  watch: {\n    blogDesc(desc) {\n      this.$emit('change', 'desc', this.blogDesc)\n    }\n  },\n  components: {\n    partTitle,\n    uploadImg\n  },\n  mounted() {\n    this.getBlogCategory()\n    this.$http.getQiniuToken().then(res => {\n      const { data } = res\n      this.qiniuToken = data.data\n    })\n  },\n}\n</script>\n\n<style lang=\"scss\">\n@import './../../../static/css/var.scss';\n.blog-meta-dialog-cmp {\n  position: fixed;\n  z-index: 2104;\n  background-color: rgba(0, 0, 0, .4);\n  .dialog-content {\n    width: 600px;\n    padding: 20px;\n    background-color: #fff;\n    border-radius: 10px;\n    .meta-list {\n      .meta-item {\n        margin-top: 10px;\n        &:first-child {\n          margin-top: 0;\n        }\n      }\n      .cate-tag {\n        .item {\n          margin-top: 10px;\n        }\n        .category {\n          color: $normalfont;\n          .cate-item {\n            margin-left: 10px;\n            cursor: pointer;\n            &:first-child {\n              margin-left: 0;\n            }\n            &.isactive {\n              color: $primarycolor;\n            }\n          }\n        }\n        .tag {\n          .tag-item {\n            display: inline-block;\n            margin: 0 10px 10px 0;\n            cursor: pointer;\n          }\n        }\n      }\n      .cover {\n        .img-content {\n          position: relative;\n          width: 300px;\n          height: 200px;\n          .img {\n            width: 100%;\n            height: 100%;\n          }\n          .el-icon-close {\n            position: absolute;\n            top: 0;\n            right: 0;\n            background-color: rgba(0, 0, 0, .4);\n            color: #fff;\n            cursor: pointer;\n          }\n        }\n      }\n    }\n    .footer {\n      margin-top: 20px;\n      text-align: right;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/MZone/blogMetaDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blog-meta-dialog-cmp all0\"},[_c('div',{staticClass:\"dialog-content hor-ver-center\"},[_c('i',{staticClass:\"el-icon-close p-r-t\",on:{\"click\":function($event){return _vm.setShow(false)}}}),_vm._v(\" \"),_c('div',{staticClass:\"meta-list\"},[_c('div',{staticClass:\"meta-item\"},[_c('part-title',{attrs:{\"text\":\"文章描述\"}}),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入文章描述\",\"type\":\"textarea\"},model:{value:(_vm.blogDesc),callback:function ($$v) {_vm.blogDesc=$$v},expression:\"blogDesc\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"meta-item cover\"},[_c('part-title',{attrs:{\"text\":\"文章封面\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.blogCover),expression:\"blogCover\"}],staticClass:\"img-content\"},[_c('i',{staticClass:\"el-icon-close\",attrs:{\"title\":\"删除封面\"},on:{\"click\":function($event){return _vm.setCover('')}}}),_vm._v(\" \"),_c('img',{staticClass:\"img\",attrs:{\"src\":_vm.blogCover,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.blogCover),expression:\"!blogCover\"}],staticClass:\"upload-cover\"},[_c('uploadImg',{attrs:{\"useType\":\"slot\",\"getStatus\":_vm.getCover,\"token\":_vm.qiniuToken},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload\"},on:{\"click\":slotProps.trigger}},[_vm._v(\"上传博客封面\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"meta-item cate-tag\"},[_c('part-title',{attrs:{\"text\":\"文章分类及标签\"}}),_vm._v(\" \"),_c('div',{staticClass:\"category item\"},_vm._l((_vm.categoryList),function(item){return _c('span',{key:item._id,class:_vm.currentCate._id === item._id ? 'cate-item isactive' : 'cate-item',on:{\"click\":function($event){return _vm.setCurrentCate(item)}}},[_vm._v(\"\\n            \"+_vm._s(item.name)+\"\\n          \")])}),0),_vm._v(\" \"),_c('div',{staticClass:\"tag item\"},_vm._l((_vm.tagList),function(item){return _c('span',{key:item._id,class:_vm.selectedTags.includes(item.name) ? 'tag-item isselected' : 'tag-item',on:{\"click\":function($event){return _vm.selectTag(item)}}},[_c('el-tag',{attrs:{\"type\":\"success\",\"effect\":_vm.selectedTags.includes(item.name) ? 'dark' : 'plain'}},[_vm._v(_vm._s(item.name))])],1)}),0),_vm._v(\" \"),_c('div',{staticClass:\"tag item\"},[_vm._v(\"\\n          已选标签：\\n          \"),_vm._l((_vm.selectedTags),function(item){return _c('span',{key:item,staticClass:\"tag-item\"},[_c('el-tag',{attrs:{\"size\":\"small\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.selectTag(item)}}},[_vm._v(_vm._s(item.name))])],1)})],2)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.setShow(false)}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"}},[_vm._v(\"存为草稿\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publish}},[_vm._v(\"发表博客\")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8284e816\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/MZone/blogMetaDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8284e816\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./blogMetaDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./blogMetaDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./blogMetaDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8284e816\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./blogMetaDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/MZone/blogMetaDialog.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"editor-blog\">\n    <div class=\"header\">\n      <el-input v-model=\"blogParams.title\" />\n      <el-button class=\"publish-btn\" @click=\"setShowDialog(true)\" type=\"primary\">发表博客</el-button>\n    </div>\n    <div class=\"editor-area\">\n      <mavon-editor v-model=\"blogParams.content\" class=\"container\"/>\n    </div>\n    <meta-dialog @change=\"metaChange\" @setShow=\"setShowDialog\" @publish=\"publish\" v-show=\"showDialog\" />\n  </div>\n</template>\n\n<script>\nimport metaDialog from './blogMetaDialog'\nexport default {\n  name: 'Editor',\n  data() {\n    return {\n      showDialog: false,\n      blogParams: {\n        category: '',\n        tags: [],\n        cover: '',\n        title: '',\n        content: '',\n        desc: ''\n      }\n    }\n  },\n  computed: {\n    userInfo() {\n      return this.$store.state.user.userInfo\n    }\n  },\n  methods: {\n    setBlogParams() {\n      for (const key in this.blogParams) {\n        if (this.blogParams.hasOwnProperty(key)) {\n          this.blogParams[key] = ''\n        }\n      }\n    },\n    async publish() {\n      const params = Object.assign({}, this.blogParams, {authorId: this.userInfo._id})\n      const { data } = await this.$http.publishBlog(params)\n      this.setBlogParams()\n      if (data.status === 2000) {\n        this.$confirm('恭喜你，发布成功！', '提示', {\n          confirmButtonText: '回到列表',\n          cancelButtonText: '再写一篇',\n          type: 'warning'\n        }).then(() => {\n          this.$router.go(-1)\n        }).catch(() => {\n               \n        })\n      }\n    },\n    metaChange(type, value) {\n      this.blogParams[type] = value\n    },\n    setShowDialog(flag) {\n      const blogParams = this.blogParams\n      if (!blogParams.title || !blogParams.content) {\n        this.$message({type: 'error', message: '信息未填写完整！'})\n        return\n      }\n      this.showDialog = flag\n    }\n  },\n  components: {\n    metaDialog\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.editor-blog {\n  height: 100%;\n  padding: 10px;\n  .header {\n    display: flex;\n    margin-bottom: 10px;\n    .publish-btn {\n      margin-left: 10px;\n    }\n  }\n  .editor-area {\n    height: calc(100% - 50px);\n    .v-note-wrapper.shadow {\n      height: 100%;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/MZone/editorBlog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-blog\"},[_c('div',{staticClass:\"header\"},[_c('el-input',{model:{value:(_vm.blogParams.title),callback:function ($$v) {_vm.$set(_vm.blogParams, \"title\", $$v)},expression:\"blogParams.title\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"publish-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.setShowDialog(true)}}},[_vm._v(\"发表博客\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"editor-area\"},[_c('mavon-editor',{staticClass:\"container\",model:{value:(_vm.blogParams.content),callback:function ($$v) {_vm.$set(_vm.blogParams, \"content\", $$v)},expression:\"blogParams.content\"}})],1),_vm._v(\" \"),_c('meta-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDialog),expression:\"showDialog\"}],on:{\"change\":_vm.metaChange,\"setShow\":_vm.setShowDialog,\"publish\":_vm.publish}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d341cc0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/MZone/editorBlog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d341cc0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./editorBlog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editorBlog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editorBlog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d341cc0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editorBlog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/MZone/editorBlog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}