(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{247:function(e,t,a){e.exports=a(480)},308:function(e,t,a){},309:function(e,t,a){},311:function(e,t,a){},315:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},476:function(e,t,a){},477:function(e,t,a){},478:function(e,t,a){},479:function(e,t,a){},480:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"toggleLoading",function(){return Y}),a.d(n,"setCurrAdmin",function(){return F});var r=a(0),c=a.n(r),o=a(7),i=a.n(o),l=a(20),s=a(21),u=a(23),m=a(22),p=a(24),d=a(53),f=a(66),g=a(481),h=a(225),E=a(64),v=a(95),y=a(9),b=v.a.SubMenu,O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={openKeys:[],selectedKeys:[]},a.renderMenuItem=function(e){var t=e.key,a=e.icon,n=e.title;return c.a.createElement(v.a.Item,{key:t},c.a.createElement(d.b,{to:t},a&&c.a.createElement(y.a,{type:a}),c.a.createElement("span",null,n)))},a.renderSubMenu=function(e){var t=e.key,n=e.icon,r=e.title,o=e.subs;return c.a.createElement(b,{key:t,title:c.a.createElement("span",null,n&&c.a.createElement(y.a,{type:n}),c.a.createElement("span",null,r))},o&&o.map(function(e){return e.subs&&e.subs.length>0?a.renderSubMenu(e):a.renderMenuItem(e)}))},a.onOpenChange=function(e){if(0!==e.length&&1!==e.length){var t=e[e.length-1];t.includes(e[0])?a.setState({openKeys:e}):a.setState({openKeys:[t]})}else a.setState({openKeys:e})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.location.pathname;this.props.location.pathname!==t&&this.setState({selectedKeys:[t]})}},{key:"componentDidMount",value:function(){var e=this.props.location.pathname,t=e.split("/");switch(t.length){case 2:this.setState({selectedKeys:[e]});break;case 5:this.setState({selectedKeys:[e],openKeys:[t.slice(0,3).join("/"),t.slice(0,4).join("/")]});break;default:this.setState({selectedKeys:[e],openKeys:[e.substr(0,e.lastIndexOf("/"))]})}}},{key:"render",value:function(){var e=this,t=this.props.menus,a=this.state,n=a.openKeys,r=a.selectedKeys,o=this.props.collapsed?{}:{openKeys:n,selectedKeys:r};return c.a.createElement(v.a,Object.assign({mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],onClick:function(t){var a=t.key;return e.setState({selectedKeys:[a]})},onOpenChange:this.onOpenChange},o,{style:{height:"100%",borderRight:0}}),t&&t.map(function(t){return t.subs&&t.subs.length>0?e.renderSubMenu(t):e.renderMenuItem(t)}))}}]),t}(r.Component),k=Object(f.g)(O),j=[{title:"\u9996\u9875",icon:"home",key:"/home"},{title:"\u666e\u901a\u7528\u6237",icon:"user",key:"/home/user",subs:[{key:"/home/user/statistics",title:"\u7528\u6237\u7edf\u8ba1",icon:"area-chart"},{key:"/home/user/edit",title:"\u7528\u6237\u7ba1\u7406",icon:"edit"}]},{title:"\u7fa4\u7ec4",icon:"team",key:"/home/group",subs:[{key:"/home/group/statistics",title:"\u67e5\u770b\u7fa4\u7ec4",icon:""},{key:"/home/group/edit",title:"\u7fa4\u7ec4\u7ba1\u7406",icon:""}]},{title:"\u7ba1\u7406\u5458\u7528\u6237",icon:"android",key:"/home/admin",subs:[{key:"/home/admin/manage",title:"\u7ba1\u7406\u5458\u7ba1\u7406",icon:"edit"}]},{title:"\u9759\u6001\u8d44\u6e90",icon:"wallet",key:"/home/statics",subs:[{key:"/home/statics/avatars",title:"\u5934\u50cf",icon:""}]},{title:"\u5173\u4e8e",icon:"info-circle-o",key:"/home/about"}],x=(a(308),g.a.Sider);var S=function(e){var t=e.collapsed;return c.a.createElement(x,{className:"custom-sider",collapsible:!0,collapsed:t},c.a.createElement("div",{className:"logo"},c.a.createElement("span",{className:"ellipsis"},"Co-Message-Admin")),c.a.createElement(k,{menus:j,collapsed:t}))},w=a(134),C=a(35),N=a(482);function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD",a=I(e.getFullYear()),n=I(e.getMonth()+1),r=I(e.getDate()),c=I(e.getHours()),o=I(e.getMinutes()),i=I(e.getSeconds());return"YYYY-MM-DD HH-MM-SS"===t?"".concat(a,"-").concat(n,"-").concat(r," ").concat(c,":").concat(o,":").concat(i):"YYYY-MM-DD"===t?"".concat(a,"-").concat(n,"-").concat(r):"YYYY-MM"===t?"".concat(a,"-").concat(n):"HH-MM-SS"===t?"".concat(c,":").concat(o,":").concat(i):"HH"===t?"".concat(c):void 0}function I(e){var t;if((t="Number",function(e){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")})(e))return e>=10?String(e):"0"+String(e)}var M=a(121),T=window.localStorage.getItem("adminInfo")||"{}",A=Object(M.fromJS)({loading:!1,currAdminInfo:JSON.parse(T)}),Y=function(e){return{type:"APP/TOGGLE_LOADING",value:e}},F=function(e){return{type:"APP/SET_CURR_ADMIN",value:e}},U=(a(309),g.a.Header),L=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isFullscreen:document.fullscreen},a.logout=function(){a.props.history.push("/login"),a.props.logout()},a.toggleFullscreen=function(){a.state.isFullscreen?(!function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()}(),a.setState({isFullscreen:!1})):(!function(){var e=document.documentElement;e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}(),a.setState({isFullscreen:!0}))},a.renderFullOption=function(){var e=a.state.isFullscreen;return c.a.createElement(y.a,{className:"header-icon",onClick:a.toggleFullscreen,type:e?"fullscreen-exit":"fullscreen"})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.collapsed,n=t.toggle,r=t.data.currAdminInfo||"";return c.a.createElement(U,{className:"custom-header",style:{background:"#fff"}},c.a.createElement(y.a,{style:{marginLeft:"-30px",marginRight:"30px"},type:a?"menu-unfold":"menu-fold",className:"header-icon",onClick:function(){return n()}}),c.a.createElement(w.a,{overlay:c.a.createElement(v.a,null,c.a.createElement(v.a.Item,null,c.a.createElement(C.a,{type:"link",onClick:function(){e.logout()}},"\u9000\u51fa\u767b\u5f55")))},c.a.createElement(N.a,{className:"avatar",size:"large",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"})),c.a.createElement("span",null,r.nickname,"\uff0c",function(){var e=(new Date).getHours();return e<6?"\u51cc\u6668\u597d\uff01":e<9?"\u65e9\u4e0a\u597d\uff01":e<12?"\u4e0a\u5348\u597d\uff01":e<14?"\u4e2d\u5348\u597d\uff01":e<17?"\u4e0b\u5348\u597d\uff01":e<19?"\u508d\u665a\u597d\uff01":e<22?"\u665a\u4e0a\u597d\uff01":"\u591c\u91cc\u597d\uff01"}()),c.a.createElement("span",{className:"full-screen"},this.renderFullOption()))}}]),t}(r.Component);var P=Object(E.b)(function(e){return{data:e.toJS().app}},function(e){return{logout:function(){document.cookie="authAdmin='error'";var t=n.setCurrAdmin({});e(t)}}})(Object(f.g)(L)),_=a(494),H={"/home":"\u9996\u9875","/home/user":"\u666e\u901a\u7528\u6237","/home/user/statistics":"\u7528\u6237\u7edf\u8ba1","/home/user/edit":"\u7528\u6237\u7ba1\u7406","/home/group":"\u7fa4\u7ec4\u7ba1\u7406","/home/group/statistics":"\u67e5\u770b\u7fa4\u7ec4","/home/group/edit":"\u7ba1\u7406\u7fa4\u7ec4","/home/admin":"\u7ba1\u7406\u5458","/home/admin/manage":"\u7ba1\u7406\u5458\u7ba1\u7406","/home/statics":"\u9759\u6001\u8d44\u6e90","/home/statics/avatars":"\u5934\u50cf"},K=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname.split("/").filter(function(e){return e}).map(function(e,t,a){return"/"+a.slice(0,t+1).join("/")});return c.a.createElement(_.a,{style:{margin:"16px 0"}},e.map(function(e){return c.a.createElement(_.a.Item,{key:e},c.a.createElement(d.b,{to:e},H[e]))}))}}]),t}(r.Component),z=Object(f.g)(K),G=(a(311),g.a.Content),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!1},a.toggleCollapsed=function(){var e=a.state.collapsed;a.setState({collapsed:!e},function(){window.localStorage.setItem("collapsed",a.state.collapsed)})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(window.localStorage.getItem("collapsed"))||!1;this.setState({collapsed:e})}},{key:"render",value:function(){var e=this.props.loading,t=this.state.collapsed;return c.a.createElement("div",{className:"container"},c.a.createElement(g.a,{className:"layout-main"},c.a.createElement(S,{collapsed:t,toggle:this.toggleCollapsed}),c.a.createElement(g.a,{style:{padding:"0 24px 24px"}},c.a.createElement(P,{collapsed:t,toggle:this.toggleCollapsed}),c.a.createElement(z,null),c.a.createElement(G,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},c.a.createElement(h.a,{spinning:e},this.props.children)))))}}]),t}(r.Component),B=Object(E.b)(function(e){return{loading:e.getIn(["app","loading"])}},function(e){return{}})(R),q=(a(315),a(495)),J=a(491),W=a(226),V=a.n(W),X=a(94),Q=a(227),Z=Object(Q.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/TOGGLE_LOADING":return e.set("loading",t.value);case"APP/SET_CURR_ADMIN":return window.localStorage.setItem("adminInfo",JSON.stringify(t.value)),e.set("currAdminInfo",t.value);default:return e}}}),$=a(228),ee=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):X.c)(Object(X.a)($.a)),te=Object(X.d)(Z,ee),ae=new d.a,ne=V.a.create({timeout:7e3,baseURL:"/api/v1"});ne.interceptors.request.use(function(e){var t=(document.cookie.split("; ").find(function(e){return"authAdmin"===e.split("=")[0]})||"").split("=")[1];return t&&(e.headers.Authorization=t),te.dispatch(n.toggleLoading(!0)),e},function(e){return Promise.reject(e)}),ne.interceptors.response.use(function(e){te.dispatch(n.toggleLoading(!1));var t=Number(e.data.status);return 2002===t&&(q.a.error("\u8bf7\u5148\u767b\u5f55\uff01"),ae.history.push("/login")),1006===t&&(q.a.error("\u8bf7\u91cd\u65b0\u767b\u5f55\uff01"),ae.history.push("/login")),4001===t&&q.a.error("\u6ca1\u6709\u64cd\u4f5c\u7684\u6743\u9650\uff01"),2003===t&&q.a.error("\u670d\u52a1\u7aef\u9519\u8bef\uff01"),e},function(e){return te.dispatch(n.toggleLoading(!1)),Promise.reject(e)});var re=ne,ce={getAllUser:function(){return re.get("/user/getalluser")},getUserBySignTime:function(e){var t=e.gt,a=e.lt;return re.get("/user/getuserbysigntime?gt=".concat(t,"&lt=").concat(a))},getUserInfo:function(e){return re.get("/user/userinfo?id=".concat(e))},changeUserStatus:function(e){return re.post("/user/changestatus",e)},getOnlineUser:function(){return re.get("/user/onlineusers")}},oe={getSystemInfo:function(){return re.get("/sys/syssituation")},getAvatar:function(){return re.get("/sys/faceimg")}},ie={login:function(e){return re.post("/superuser/login",e)},add:function(e){return re.post("/superuser/add",e)},getAllSuperUser:function(){return re.get("/superuser/all")}},le={getAllGroup:function(){return re.get("/group/all")}},se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handlerNameChange=function(e){a.setState({name:e.target.value})},a.handlerPwdChange=function(e){a.setState({password:e.target.value})},a.login=function(){var e=a.state,t={name:e.name,password:e.password};ie.login(t).then(function(e){var t,n=e.data||{};1e3===n.status&&(q.a.success("\u767b\u5f55\u6210\u529f\uff01"),a.props.setCurrAdmin(n.data.userInfo),(t=n.data.token)&&(document.cookie="authAdmin=".concat(t)),a.props.history.push("/home"))})},a.state={name:"",password:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"login-form"},c.a.createElement("div",{className:"form-item"},c.a.createElement(J.a,{autoComplete:"new-password",onChange:this.handlerNameChange,prefix:c.a.createElement(y.a,{type:"user"})})),c.a.createElement("div",{className:"form-item"},c.a.createElement(J.a.Password,{autoComplete:"new-password",onChange:this.handlerPwdChange,prefix:c.a.createElement(y.a,{type:"lock"})})),c.a.createElement("div",{className:"form-item"},c.a.createElement(C.a,{onClick:this.login,type:"primary",block:!0},"\u767b\u5f55")))}}]),t}(r.Component);var ue=Object(E.b)(null,function(e){return{setCurrAdmin:function(t){var a=n.setCurrAdmin(t);e(a)}}})(Object(f.g)(se)),me=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"login-form"},c.a.createElement("div",{className:"form-item"},c.a.createElement(J.a,{prefix:c.a.createElement(y.a,{type:"user"})})),c.a.createElement("div",{className:"form-item"},c.a.createElement(J.a.Password,{prefix:c.a.createElement(y.a,{type:"lock"})})),c.a.createElement("div",{className:"form-item"},c.a.createElement(J.a.Password,{prefix:c.a.createElement(y.a,{type:"lock"})})),c.a.createElement("div",{className:"form-item cvcode"},c.a.createElement(J.a,{prefix:c.a.createElement(y.a,{type:"lock"})}),c.a.createElement("div",null,"\u9a8c\u8bc1\u7801")),c.a.createElement("div",{className:"form-item"},c.a.createElement(C.a,{type:"primary",block:!0},"\u6ce8\u518c")))}}]),t}(r.Component),pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).toggleState=function(){var e=a.state.isLogin;a.setState({isLogin:!e})},a.state={isLogin:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.isLogin;return c.a.createElement("div",{className:"login-page"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"header"},c.a.createElement("span",{className:"pointer title",onClick:this.toggleState},"\u767b\u5f55")),e?c.a.createElement(ue,null):c.a.createElement(me,null),c.a.createElement("div",{className:"footer"})))}}]),t}(r.Component),de=a(65),fe=a(18),ge=fe.Guide.Html,he=fe.Guide.Arc;fe.Shape.registerShape("point","pointer",{drawShape:function(e,t){var a=e.points[0];a=this.parsePoint(a);var n=this.parsePoint({x:0,y:0});return t.addShape("line",{attrs:{x1:n.x,y1:n.y,x2:a.x,y2:a.y-20,stroke:e.color,lineWidth:2,lineCap:"round"}}),t.addShape("circle",{attrs:{x:n.x,y:n.y,r:6,stroke:e.color,lineWidth:4.5,fill:"#fff"}})}});var Ee={value:{min:0,max:9,tickInterval:1,nice:!1}},ve=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.source,a=e.font,n=[{value:Number(t)}];return c.a.createElement(fe.Chart,{width:200,height:300,data:n,scale:Ee,padding:[-100,0,0,0],forceFit:!0},c.a.createElement(fe.Coord,{type:"polar",startAngle:-9/8*Math.PI,endAngle:1/8*Math.PI,radius:.75}),c.a.createElement(fe.Axis,{name:"value",zIndex:2,line:null,label:{offset:-16,textStyle:{fontSize:18,textAlign:"center",textBaseline:"middle"}},subTickCount:4,subTickLine:{length:-8,stroke:"#fff",strokeOpacity:1},tickLine:{length:-18,stroke:"#fff",strokeOpacity:1}}),c.a.createElement(fe.Axis,{name:"1",visible:!1}),c.a.createElement(fe.Guide,null,c.a.createElement(he,{zIndex:0,start:[0,.965],end:[9,.965],style:{stroke:"#CBCBCB",lineWidth:9}}),c.a.createElement(he,{zIndex:1,start:[0,.965],end:[n[0].value,.965],style:{stroke:"#1890FF",lineWidth:9}}),c.a.createElement(ge,{position:["50%","95%"],html:function(){return'\n            <div style="width: 300px;text-align: center;font-size: 12px!important; margin-top: -50px">\n              <p style="font-size: 1.75em; color: rgba(0,0,0,0.43);margin: 0;">'.concat(a,'</p>\n              <p style="font-size: 3em;color: rgba(0,0,0,0.85);margin: 0;">\n                ').concat((10*n[0].value).toFixed(2),"%\n              </p>\n            </div>")}})),c.a.createElement(fe.Geom,{type:"point",position:"value*1",shape:"pointer",color:"#1890FF",active:!1,style:{stroke:"#fff",lineWidth:1}}))}}]),t}(c.a.Component);a(340);var ye=function(){var e=Object(r.useState)({cpuUsage:0,MemUsage:0}),t=Object(de.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)(function(){oe.getSystemInfo().then(function(e){var t=e.data;2e3===t.status&&n(t.data)})},[]),c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"system-info"},c.a.createElement("div",{className:"item"},c.a.createElement(ve,{source:a.cpuUsage,font:"CPU\u4f7f\u7528\u7387"})),c.a.createElement("div",{className:"item"},c.a.createElement(ve,{source:a.MemUsage,font:"\u5185\u5b58\u4f7f\u7528\u7387"}))))},be=a(488),Oe=a(493),ke=a(483),je=a(96),xe=a(48),Se=a(489),we=a(14),Ce=a.n(we),Ne=a(241),De=a(172),Ie=a.n(De),Me=a(129),Te=a.n(Me),Ae=window.AMapUI,Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e5,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ae?new Promise(function(a,n){Ae.load("ui/geo/DistrictExplorer",function(r){(new r).loadAreaNode(e,function(e,r){e&&n();var c,o=null;o=t?r.getSubFeatures():r.getParentFeature(),a(!!(c=o)&&(Array.isArray(c)?{type:"FeatureCollection",features:Object(Ne.a)(c)}:c))})})}):Promise.reject()};c.a.Component;function Fe(e){var t=e.data,a=e.scale;return c.a.createElement(fe.Chart,{height:400,data:t,scale:a,forceFit:!0,padding:[80,100,80,80]},c.a.createElement(fe.Coord,{type:"theta",radius:.75}),c.a.createElement(fe.Axis,{name:"percent"}),c.a.createElement(fe.Legend,{position:"top",offsetY:0}),c.a.createElement(fe.Tooltip,{showTitle:!1,itemTpl:'<li><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),c.a.createElement(fe.Geom,{type:"intervalStack",position:"percent",color:"item",tooltip:["item*percent",function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}}],style:{lineWidth:1,stroke:"#fff"}},c.a.createElement(fe.Label,{content:"percent",formatter:function(e,t){return t.point.item+": "+e}})))}function Ue(e){var t=e.data,a=e.scale;return c.a.createElement(fe.Chart,{height:400,data:t,scale:a,forceFit:!0},c.a.createElement(fe.Axis,{name:"age"}),c.a.createElement(fe.Axis,{name:"count"}),c.a.createElement(fe.Tooltip,{crosshairs:{type:"y"}}),c.a.createElement(fe.Geom,{type:"interval",position:"age*count"}))}function Le(e){var t=e.data,a=e.scale;return c.a.createElement(fe.Chart,{height:400,data:t,scale:a,forceFit:!0},c.a.createElement(fe.Axis,{name:"time"}),c.a.createElement(fe.Axis,{name:"count"}),c.a.createElement(fe.Tooltip,{crosshairs:{type:"y"}}),c.a.createElement(fe.Geom,{type:"line",position:"time*count",size:2}),c.a.createElement(fe.Geom,{type:"point",position:"time*count",size:4,shape:"circle",style:{stroke:"#fff",lineWidth:1}}))}var Pe=function(e){var t=new Me.View;return t.source(e).transform({type:"percent",field:"count",dimension:"item",as:"percent"}),t},_e={percent:{formatter:function(e){return e=(100*e).toFixed(2)+"%"}}},He={count:{tickInterval:3}},Ke={count:{min:0},time:{range:[0,1]}},ze=[{item:"\u7537\ud83d\udc68",count:0},{item:"\u5973\ud83d\udc69",count:0},{item:"\u672a\u77e5",count:0}],Ge=[{age:"\u5c0f\u4e8e15\u5c81 <=15",count:0},{age:"15\u81f330\u5c81 15~30",count:0},{age:"30\u81f350\u5c81 30~50",count:0},{age:"\u5927\u4e8e50\u5c81 >=50",count:0}],Re=[{time:"\u51cc\u6668 00:00-05:59",count:0},{time:"\u65e9\u6668 06:00-08:59",count:0},{time:"\u4e0a\u5348 09:00-10:59",count:0},{time:"\u4e2d\u5348 11:00-12:59",count:0},{time:"\u4e0b\u5348 13:00-16:59",count:0},{time:"\u508d\u665a 17:00-16:59",count:0},{time:"\u665a\u4e0a 19:00-23:59",count:0}],Be=[{item:"Chrome",count:0},{item:"FireFox",count:0},{item:"Opera",count:0},{item:"Safari",count:0},{item:"Edge/IE",count:0}],qe=(a(341),be.a.MonthPicker),Je=D(new Date,"YYYY-MM"),We={display:"flex",justifyContent:"space-between"},Ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).signUserCardTitle=function(){return c.a.createElement("div",{style:We},c.a.createElement("span",null,"\u7528\u6237\u5728\u3010",a.state.selectMonth,"\u3011\u7684\u6ce8\u518c\u8d8b\u52bf"),c.a.createElement(qe,{placeholder:"Select Month",defaultValue:Ce()(Je),onChange:function(e,t){return a.handlerMonthChange(t)}}))},a.alertMessage=function(){var e=a.state.userNumTotal,t=Object.keys(a.state.onlineUser).length,n=(t/e*100).toFixed(2)+"%";return c.a.createElement("div",{style:We},c.a.createElement(Oe.a,{title:"\u5f53\u524d\u7528\u6237\u603b\u91cf",value:e+"\u4eba"}),c.a.createElement(Oe.a,{title:"\u5f53\u524d\u5728\u7ebf\u7528\u6237",value:t+"\u4eba"}),c.a.createElement(Oe.a,{title:"\u7528\u6237\u5728\u7ebf\u6bd4\u4f8b",value:n}))},a.handlerMonthChange=function(e){a.setState({selectMonth:e},function(){a.getUserBySignTime()})},a.getUserBySignTime=function(){var e=ce.getUserBySignTime,t=a.state.selectMonth,n=t.split("-"),r="12"===n[1]?Number(n[0])+1+"-1":Number(n[0])+"-"+(Number(n[1])+1);e({gt:t,lt:r}).then(function(e){var n=e.data,r=n.data;if(2e3===n.status){var c=r.map(function(e){return D(new Date(e.signUpTime),"YYYY-MM-DD")}),o=function(e){for(var t=[],a=0;a<30;a++)t.unshift({time:D(new Date(new Date(e).setDate(new Date(e).getDate()+a)),"YYYY-MM-DD"),count:0});return t}(t);c.forEach(function(e){var t=o.findIndex(function(t){return t.time===e});t>=0&&o[t].count++}),a.setState({signUpTimeData:o})}})},a.state={genderData:[],ageData:[],signUpTimeData:[],lastLoginTimeData:[],browserData:[],userNumTotal:0,onlineUser:{},selectMonth:Je},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.genderData,a=e.ageData,n=e.signUpTimeData,r=e.lastLoginTimeData,o=e.browserData,i=Pe(t),l=Pe(o);return c.a.createElement("div",{className:"user-statistics-page"},c.a.createElement(ke.a,{message:this.alertMessage(),type:"success"}),c.a.createElement(je.a,{gutter:10},c.a.createElement(xe.a,{span:12},c.a.createElement(Se.a,{title:"\u7528\u6237\u6027\u522b\u5206\u5e03\u56fe",className:"card-item"},c.a.createElement(Fe,{data:i,scale:_e}))),c.a.createElement(xe.a,{span:12},c.a.createElement(Se.a,{title:"\u7528\u6237\u5e74\u9f84\u5206\u5e03\u56fe",className:"card-item"},c.a.createElement(Ue,{data:a,scale:He})))),c.a.createElement(je.a,{gutter:10},c.a.createElement(xe.a,{span:12},c.a.createElement(Se.a,{title:"\u7528\u6237\u8bbf\u95ee\u6d4f\u89c8\u5668\u7edf\u8ba1",className:"card-item"},c.a.createElement(Fe,{data:l,scale:_e})))),c.a.createElement(je.a,{gutter:10},c.a.createElement(xe.a,{span:24},c.a.createElement(Se.a,{title:this.signUserCardTitle(),className:"card-item"},c.a.createElement(Le,{data:n,scale:Ke})))),c.a.createElement(je.a,{gutter:10},c.a.createElement(xe.a,{span:24},c.a.createElement(Se.a,{title:"\u7528\u6237\u767b\u5f55\u65f6\u95f4\u6bb5\u5206\u5e03",className:"card-item"},c.a.createElement(Le,{data:r,scale:Ke})))))}},{key:"componentDidMount",value:function(){var e=this,t=ce.getAllUser,a=ce.getOnlineUser;t().then(function(t){var a=t.data,n=a.data;if(2e3===a.status){var r=function(e){return e.map(function(e){return e.loginSetting&&e.loginSetting}).filter(function(e){return e}).map(function(e){return e.browser}).filter(function(e){return e}).forEach(function(e){"Opera"===e?Be[2].count++:"Chrome"===e?Be[0].count++:"Safari"===e?Be[3].count++:"FireFox"===e?Be[1].count++:"IE"!==e&&"Edge"!==e||Be[4].count++}),Be}(n),c=function(e){return e.map(function(e){return e.sex}).forEach(function(e){"0"===e?ze[0].count++:"1"===e?ze[1].count++:ze[2].count++}),ze}(n),o=function(e){return e.map(function(e){return Number(e.age)}).forEach(function(e){e<=15?Ge[0].count++:e>15&&e<30?Ge[1].count++:e>=30&&e<50?Ge[2].count++:Ge[3].count++}),Ge}(n),i=function(e){return e.map(function(e){return Number(D(new Date(e.lastLoginTime),"HH"))}).forEach(function(e){0<e&&e<6?Re[0].count++:6<e&&e<9?Re[1].count++:9<e&&e<11?Re[2].count++:11<e&&e<13?Re[3].count++:13<e&&e<17?Re[4].count++:17<e&&e<19?Re[5].count++:19<e&&e<24&&Re[6].count++}),Re}(n);e.setState({genderData:c,ageData:o,browserData:r,lastLoginTimeData:i,userNumTotal:n.length})}}),a().then(function(t){var a=t.data,n=a.data;2e3===a.status&&t.status<400&&e.setState({onlineUser:n})}),this.getUserBySignTime()}}]),t}(r.Component),Xe=a(122),Qe=a(487),Ze=a(492),$e=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.visible,t=this.props.toggle;return c.a.createElement(Ze.a,{title:"Basic Modal",visible:e,onCancel:function(){t()}},c.a.createElement("p",null,"Some contents..."),c.a.createElement("p",null,"Some contents..."),c.a.createElement("p",null,"Some contents..."))}}]),t}(r.Component),et=a(484),tt=a(92),at=a(485),nt=a(242),rt=a(486),ct=function(e){return[{title:"MessageId",width:100,dataIndex:"code",key:"code",fixed:"left"},{title:"\u8d26\u53f7",width:100,dataIndex:"name",key:"name",fixed:"left"},{title:"\u6635\u79f0",dataIndex:"nickname",key:"nickname",width:180,ellipsis:!0},{title:"\u5e74\u9f84",dataIndex:"age",key:"age",width:80,ellipsis:!0},{title:"\u6027\u522b",dataIndex:"sex",key:"sex",width:100,render:function(e){return c.a.createElement("span",null,"0"===(t=e)?"\u7537\ud83d\udc68":"1"===t?"\u5973\ud83d\udc69":"\u672a\u77e5");var t}},{title:"\u6240\u5728\u5730",dataIndex:"address",key:"address",width:200,ellipsis:!0},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"signUpTime",key:"signUpTime",width:300,render:function(e){return c.a.createElement("span",null,c.a.createElement(y.a,{type:"clock-circle"})," ",D(new Date(e),"YYYY-MM-DD"))}},{title:"\u6700\u540e\u767b\u5f55\u65f6\u95f4",dataIndex:"lastLoginTime",key:"lastLoginTime",width:300,render:function(e){return c.a.createElement("span",null,c.a.createElement(y.a,{type:"clock-circle"})," ",D(new Date(e),"YYYY-MM-DD"))}},{title:"\u4e0a\u6b21\u767b\u5f55\u5df2\u8fc7\u53bb",dataIndex:"lastLoginTimeToNow",key:"lastLoginTimeToNow",width:300,render:function(e,t){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD",a=e/1e3/60/60/24,n=Math.floor(a),r=e/1e3/60/60-24*n,c=Math.floor(r);return"DD"===t?"".concat(n,"\u5929"):"DD-HH"===t?"".concat(n,"\u5929").concat(c,"\u5c0f\u65f6"):void 0}(new Date-new Date(t.lastLoginTime),"DD-HH");return c.a.createElement("span",{style:parseInt(a)>30?{color:"red"}:{}},c.a.createElement(y.a,{type:"clock-circle"})," ",c.a.createElement("span",null,a),c.a.createElement("span",{style:{marginLeft:"4px"}},parseInt(a)>30?c.a.createElement(et.a,{content:"\u90ae\u7bb1\u53ec\u56de",title:"\u53ec\u56de"},c.a.createElement(y.a,{type:"phone"})):""))}},{title:"\u7b7e\u540d",dataIndex:"signature",key:"signature",width:180,render:function(e){var t=e?e.slice(0,7)+"...":"\u6682\u65e0\u6570\u636e";return c.a.createElement(tt.a,{placement:"top",title:e},c.a.createElement("span",null,t))}},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:150,render:function(t,a,n){return c.a.createElement("span",{style:{display:"flex"}},c.a.createElement(at.a,{style:{marginRight:"4px"},onChange:function(){e.handleChangeStatus(a,n)},checked:0===t}),0===t?c.a.createElement(nt.a,{color:"green"},"\u6b63\u5e38"):c.a.createElement(nt.a,{color:"magenta"},"\u51bb\u7ed3"))}},{title:"\u767b\u5f55\u65e5\u5fd7",dataIndex:"loginSetting",key:"loginsetting",width:50,render:function(e,t,a){var n=c.a.createElement("div",null,c.a.createElement("p",null,"\u767b\u5f55\u7cfb\u7edf\uff1a",e.os||"\u6682\u65e0\u6b64\u4fe1\u606f"),c.a.createElement("p",null,"\u767b\u5f55\u6d4f\u89c8\u5668\uff1a",e.browser||"\u6682\u65e0\u6b64\u4fe1\u606f"),c.a.createElement("p",null,"\u767b\u5f55IP\uff1a",e.ip||"\u6682\u65e0\u6b64\u4fe1\u606f"),c.a.createElement("p",null,"\u767b\u5f55\u5730\u533a\uff1a",e.country||"\u6682\u65e0\u6b64\u4fe1\u606f"));return c.a.createElement(et.a,{content:n,title:"\u767b\u5f55\u65e5\u5fd7"},c.a.createElement(nt.a,{color:"volcano"},"\u67e5\u770b\u767b\u5f55\u4fe1\u606f"))}},{title:"\u7f16\u8f91",key:"operation",fixed:"right",width:100,render:function(e,t){var a=c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(rt.a,{title:"\u903b\u8f91\u5220\u9664\u540e\u53ef\u6062\u590d\u8be5\u7528\u6237\u3002",okText:"Yes",cancelText:"No"},c.a.createElement("a",{href:"#"},"\u903b\u8f91\u5220\u9664"))),c.a.createElement("div",null,c.a.createElement(rt.a,{title:"\u7269\u7406\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\u3002",okText:"Yes",cancelText:"No"},c.a.createElement("a",{href:"#"},"\u903b\u8f91\u5220\u9664"))));return c.a.createElement(et.a,{content:a,title:"\u64cd\u4f5c",trigger:"click"},c.a.createElement(C.a,{type:"primary"},"\u7f16\u8f91\u7528\u6237"))}}]},ot=ce.changeUserStatus,it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handlerClick=function(e,t,a){console.log(e,t,a)},a.toggleModalVisiable=function(e){var t=a.state.visible,n=ce.getUserInfo;a.setState({visible:!t}),e&&e._id&&n(e._id).then(function(e){console.log(e)})},a.handleChangeStatus=function(e,t){var n=a.state.userList,r=JSON.parse(JSON.stringify(n)),c=0===n[t].status?1:0;r[t].status=c;var o={id:e._id,state:c};ot(o).then(function(e){var t=e.data.status;e.status<400&&2e3===t&&(q.a.success("\u4fee\u6539\u6210\u529f\uff01"),a.setState({userList:r}))})},a.state={userList:[],visible:!1},a.columns=ct(Object(Xe.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.userList,n=document.querySelector(".ant-layout-content"),r=n?n.offsetHeight:"600",o={pageSize:Math.round(r/90),total:a.length,showTotal:function(e){return"\u5171 ".concat(e," \u6761\u6570\u636e")}};return c.a.createElement("div",{className:"user-edit-page"},c.a.createElement(Qe.a,{pagination:o,rowKey:function(e){return e._id},columns:this.columns,dataSource:a,scroll:{x:1700,y:0}}),c.a.createElement($e,{visible:t,toggle:this.toggleModalVisiable}))}},{key:"componentDidMount",value:function(){var e=this;(0,ce.getAllUser)().then(function(t){var a=t.data,n=a.data,r=a.status;t.status<400&&2e3===r&&(n.forEach(function(e){e.address=e.province.name+e.city.name,e.loginSetting=e.loginSetting?e.loginSetting:{}}),e.setState({userList:n}))})}}]),t}(r.Component);var lt=function(){return c.a.createElement("div",null,c.a.createElement("p",null,"\u7fa4\u804a\u7edf\u8ba1"))},st=a(45),ut=a.n(st),mt=a(75);var pt=function(){return Object(r.useEffect)(function(){Object(mt.a)(ut.a.mark(function e(){var t,a,n;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.getAllGroup();case 2:t=e.sent,a=t.data,n=void 0===a?{}:a,console.log(n);case 6:case"end":return e.stop()}},e)}))()},[]),c.a.createElement("div",null,c.a.createElement("p",null,"\u7fa4\u804aEdit"))},dt=a(132),ft=a(237),gt=a(105),ht=a(490),Et=gt.a.Option,vt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.onChange;return c.a.createElement(ht.a,null,c.a.createElement(ht.a.Item,null,c.a.createElement(J.a,{autoComplete:"on",prefix:c.a.createElement(y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8d26\u53f7",onChange:function(t){e({type:"name",data:t.target.value})}})),c.a.createElement(ht.a.Item,null,c.a.createElement(J.a,{autoComplete:"on",prefix:c.a.createElement(y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5bc6\u7801",onChange:function(t){e({type:"password",data:t.target.value})}})),c.a.createElement(ht.a.Item,null,c.a.createElement(gt.a,{defaultValue:"1",placeholder:"\u9009\u62e9\u8eab\u4efd",onChange:function(t){e({type:"role",data:t})}},c.a.createElement(Et,{value:"0"},"\u8d85\u7ea7\u7ba1\u7406\u5458\uff08\u589e\u5220\u6539\u67e5\u6743\u9650\uff09"),c.a.createElement(Et,{value:"1"},"\u666e\u901a\u7ba1\u7406\u5458\uff08\u67e5\u6743\u9650\uff09"))))}}]),t}(c.a.Component),yt=(a(476),[{title:"ID",dataIndex:"_id",key:"_id"},{title:"\u8d26\u53f7",dataIndex:"name",key:"name"},{title:"\u6635\u79f0",dataIndex:"nickname",key:"nickname"},{title:"\u6743\u9650",dataIndex:"role",key:"role"},{title:"\u7f16\u8f91",key:"operation",fixed:"right",width:100,render:function(e,t){var a=c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(rt.a,{title:"\u903b\u8f91\u5220\u9664\u540e\u53ef\u6062\u590d\u8be5\u7528\u6237\u3002",okText:"Yes",cancelText:"No"},c.a.createElement(C.a,{type:"link"},"\u903b\u8f91\u5220\u9664"))),c.a.createElement("div",null,c.a.createElement(rt.a,{title:"\u7269\u7406\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\u3002",okText:"Yes",cancelText:"No"},c.a.createElement(C.a,{type:"link"},"\u903b\u8f91\u5220\u9664"))));return c.a.createElement(et.a,{content:a,title:"\u64cd\u4f5c",trigger:"click"},c.a.createElement(C.a,{type:"primary"},"\u7f16\u8f91\u7528\u6237"))}}]);function bt(e){var t=Object(r.useState)(!1),a=Object(de.a)(t,2),n=a[0],o=a[1],i=Object(r.useState)({name:"",password:"",role:"1"}),l=Object(de.a)(i,2),s=l[0],u=l[1],m=Object(r.useState)([]),p=Object(de.a)(m,2),d=p[0],f=p[1];Object(r.useEffect)(function(){Object(mt.a)(ut.a.mark(function e(){var t,a,n;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.getAllSuperUser();case 2:t=e.sent,a=t.data,n=void 0===a?{}:a,console.log(n),2e3===n.status&&f(n.data);case 7:case"end":return e.stop()}},e)}))()},[]);var g=function(){var e=Object(mt.a)(ut.a.mark(function e(){var t,a;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=ut.a.keys(s);case 1:if((e.t1=e.t0()).done){e.next=9;break}if(t=e.t1.value,!s.hasOwnProperty(t)){e.next=7;break}if(s[t]){e.next=7;break}return q.a.error("\u4fe1\u606f\u4e0d\u5b8c\u6574"),e.abrupt("return");case 7:e.next=1;break;case 9:return e.next=11,ie.add(s);case 11:a=e.sent,2e3===a.data.status&&(q.a.success("\u6dfb\u52a0\u6210\u529f\uff01"),o(!1));case 14:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"admin-manage-page"},c.a.createElement(Ze.a,{title:"\u521b\u5efa\u7ba1\u7406\u5458",visible:n,onOk:g,onCancel:function(){o(!1)}},c.a.createElement(vt,{onChange:function(e){var t=e.type,a=e.data,n=Object(ft.a)({},s,Object(dt.a)({},t,a));u(n)}})),c.a.createElement("header",{className:"admin-manage-header"},c.a.createElement("p",null,"\u5f53\u524d\u7ba1\u7406\u5458"),c.a.createElement(C.a,{type:"primary",onClick:function(){o(!0)}},"\u6dfb\u52a0\u65b0\u7684\u7ba1\u7406\u5458")),c.a.createElement(Qe.a,{dataSource:d,columns:yt}))}a(477);var Ot=function(){return!1}?"http://localhost:3333/":"http://co-messager.chenr.cn";function kt(){var e=Object(r.useState)([]),t=Object(de.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)(function(){Object(mt.a)(ut.a.mark(function e(){var t,a,r;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAvatar();case 2:t=e.sent,a=t.data,2e3===(r=void 0===a?{}:a).status&&n(r.data);case 6:case"end":return e.stop()}},e)}))()},[]),c.a.createElement("div",{className:"statics-avatar-page"},c.a.createElement("main",{className:"avatar-list"},a.map(function(e){return c.a.createElement("span",{className:"avatar-item"},c.a.createElement("img",{width:"200",key:e,src:Ot+"face/"+e,alt:"\u56fe\u7247"}),c.a.createElement("span",{className:"oper"},"oper"))})))}var jt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,null,c.a.createElement(f.d,null,c.a.createElement(f.b,{exact:!0,path:"/login",component:pe}),c.a.createElement(B,null,c.a.createElement(f.d,null,c.a.createElement(f.b,{exact:!0,path:"/",component:ye}),c.a.createElement(f.b,{exact:!0,path:"/home",component:ye}),c.a.createElement(f.b,{exact:!0,path:"/home/user",render:function(){return c.a.createElement(f.a,{replace:!0,to:"/home/user/statistics"})}}),c.a.createElement(f.b,{exact:!0,path:"/home/user/statistics",component:Ve}),c.a.createElement(f.b,{exact:!0,path:"/home/user/edit",component:it}),c.a.createElement(f.b,{exact:!0,path:"/home/group",render:function(){return c.a.createElement(f.a,{replace:!0,to:"/home/group/statistics"})}}),c.a.createElement(f.b,{exact:!0,path:"/home/group/statistics",component:lt}),c.a.createElement(f.b,{exact:!0,path:"/home/group/edit",component:pt}),c.a.createElement(f.b,{exact:!0,path:"/home/admin/manage",component:bt}),c.a.createElement(f.b,{exact:!0,path:"/home/statics/avatars",component:kt})))))}}]),t}(r.Component),xt=(a(478),a(479),c.a.createElement(E.a,{store:te},c.a.createElement(jt,null)));i.a.render(xt,document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.523b76f0.chunk.js.map